<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dog Activity Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    input[type="date"],
    input[type="time"],
    select,
    textarea {
      border: 1px solid #d1d5db;
      padding: 0.5rem;
      border-radius: 0.25rem;
      width: 100%;
      box-sizing: border-box;
    }
    table, th, td {
      border-collapse: collapse;
      border: 1px solid #d1d5db;
    }
    th, td {
      padding: 0.75rem;
      text-align: left;
    }
    th {
      background-color: #f3f4f6;
    }
  </style>
</head>

<body class="bg-gray-100 p-6 font-sans">

  <div class="container mx-auto bg-white rounded-xl shadow-md p-8">
    <h1 class="text-2xl font-bold mb-6 text-center text-gray-800">Dog Daily Activity Tracker</h1>

    <!-- Search Bar -->
    <div class="mb-6">
      <input id="searchInput" type="text" placeholder="Search activities..." class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
    </div>

    <!-- Form -->
    <form id="activityForm" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <div>
        <label for="activityDate" class="block text-sm font-medium text-gray-700 mb-1">Date:</label>
        <input type="date" id="activityDate" required>
      </div>
      <div>
        <label for="activityTime" class="block text-sm font-medium text-gray-700 mb-1">Time:</label>
        <input type="time" id="activityTime" required>
      </div>
      <div class="md:col-span-2">
        <label for="activityType" class="block text-sm font-medium text-gray-700 mb-1">Activity Type:</label>
        <select id="activityType" required>
          <option value="">Select Activity</option>
          <option value="walk">Walk</option>
          <option value="meal">Mealtime</option>
          <option value="sleep">Sleep</option>
          <option value="training">Training</option>
          <option value="garden">Garden Time</option>
          <option value="playtime">Playtime</option>
          <option value="rest">Rest/Nap</option>
          <option value="enrichment">Enrichment</option>
          <option value="stress">Stress/Behavior</option>
          <option value="health">General Health</option>
          <option value="dog-dog">Dog-Dog Time</option>
          <option value="people">People Time</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="md:col-span-2">
        <label for="activityDetails" class="block text-sm font-medium text-gray-700 mb-1">Activity Details:</label>
        <textarea id="activityDetails" rows="3" required></textarea>
      </div>
      <div class="md:col-span-2">
        <label for="generalNotes" class="block text-sm font-medium text-gray-700 mb-1">General Notes for the Day:</label>
        <textarea id="generalNotes" rows="3"></textarea>
      </div>
      <div class="md:col-span-2 text-center">
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 ease-in-out">
          Add Activity
        </button>
      </div>
    </form>

    <!-- Table -->
    <div>
      <h2 class="text-xl font-bold mb-4 text-gray-800">Activity Log</h2>
      <div class="overflow-x-auto">
        <table id="activityTable" class="min-w-full bg-white rounded-md shadow-sm">
          <thead>
            <tr>
              <th>Date</th>
              <th>Time</th>
              <th>Activity Type</th>
              <th>Details</th>
              <th>General Notes</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    const activityForm = document.getElementById('activityForm');
    const activityTableBody = document.querySelector('#activityTable tbody');
    const searchInput = document.getElementById('searchInput');
    const generalNotesTextarea = document.getElementById('generalNotes');

    const webAppUrl = 'https://script.google.com/macros/s/AKfycbw79bMc9x3rYbS4pqkdy344ar3HDwi5zxnDP9Es-c9OMtQclJbUsVIkrv0rkQ-wbXRJ/exec'; // <-- Change this to your actual URL!

    // Submit new activity
    activityForm.addEventListener('submit', async function(event) {
      event.preventDefault();

      const date = document.getElementById('activityDate').value;
      const time = document.getElementById('activityTime').value;
      const activityType = document.getElementById('activityType').value;
      const activityDetails = document.getElementById('activityDetails').value;
      const generalNotes = generalNotesTextarea.value;

      // Save to Google Sheets
      await fetch(webAppUrl, {
        method: 'POST',
        body: JSON.stringify({ date, time, activityType, activityDetails, generalNotes }),
        headers: { 'Content-Type': 'application/json' }
      });

      // Add to table immediately
      const newRow = activityTableBody.insertRow();
      newRow.insertCell(0).textContent = date;
      newRow.insertCell(1).textContent = time;
      newRow.insertCell(2).textContent = activityType;
      newRow.insertCell(3).textContent = activityDetails;
      newRow.insertCell(4).textContent = generalNotes;

      activityForm.reset();
    });

    // Load existing activities from Sheets
    async function loadActivities() {
      const response = await fetch(webAppUrl);
      const activities = await response.json();

      activityTableBody.innerHTML = '';

      activities.forEach(activity => {
        const newRow = activityTableBody.insertRow();
        newRow.insertCell(0).textContent = activity['Date'] || '';
        newRow.insertCell(1).textContent = activity['Time'] || '';
        newRow.insertCell(2).textContent = activity['Activity Type'] || '';
        newRow.insertCell(3).textContent = activity['Activity Details'] || '';
        newRow.insertCell(4).textContent = activity['General Notes'] || '';
      });
    }

    window.addEventListener('DOMContentLoaded', loadActivities);

    // Search functionality
    searchInput.addEventListener('input', function() {
      const filter = searchInput.value.toLowerCase();
      const rows = activityTableBody.getElementsByTagName('tr');

      Array.from(rows).forEach(row => {
        const cells = row.getElementsByTagName('td');
        const text = Array.from(cells).map(cell => cell.textContent.toLowerCase()).join(' ');
        row.style.display = text.includes(filter) ? '' : 'none';
      });
    });
  </script>

</body>
</html>
 
